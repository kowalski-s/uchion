import type { GradeTierConfig } from '../../types.js'

export const geometryGradeTiers: GradeTierConfig[] = [
  // Tier 1: 7-8 класс — анализ и связи
  {
    grades: [7, 8],
    cognitiveContract: `ЗАПРЕЩЁННЫЕ ПАТТЕРНЫ (уровень 5-6 класса — слишком просто):
\u274C "Найди угол/сторону" без объяснения \u2192 ЗАМЕНИ на "Найди угол, объясни какое свойство/теорему применил, проверь результат"
\u274C "Вычисли площадь" без обоснования \u2192 ЗАМЕНИ на "Вычисли площадь, объясни выбор формулы, проверь через другой способ"
\u274C "Определи вид треугольника" без анализа \u2192 ЗАМЕНИ на "Определи вид, обоснуй по признакам, приведи контрпример"
\u274C Задания с одним действием без размышления \u2192 ЗАМЕНИ на задания с анализом, доказательством элементов или сравнением методов

ОБЯЗАТЕЛЬНЫЕ ЭЛЕМЕНТЫ В КАЖДОМ ЗАДАНИИ (минимум один):
\u2713 АНАЛИЗ: "объясни почему", "обоснуй", "какое свойство применяется"
\u2713 ДОКАЗАТЕЛЬСТВО: "докажи что", "обоснуй равенство", "покажи, что треугольники равны"
\u2713 СРАВНЕНИЕ МЕТОДОВ: "реши двумя способами", "какой признак подходит лучше"
\u2713 ВЕРИФИКАЦИЯ: "проверь результат", "верно ли утверждение и почему"`,

    exampleTask: `Тема "Признаки равенства треугольников", 7 класс, open_question:
"В треугольниках ABC и DEF: AB = DE = 5 см, \u2220A = \u2220D = 60\u00b0, BC = EF = 7 см. Равны ли эти треугольники? По какому признаку? Следует ли из этого, что \u2220B = \u2220E? Обоснуй ответ."
(применение признака + обоснование + вывод следствия)`,
  },

  // Tier 2: 9-11 класс — синтез, оценка, доказательство
  {
    grades: [9, 11],
    cognitiveContract: `ЗАПРЕЩЁННЫЕ ПАТТЕРНЫ (уровень 7-8 класса — КАТЕГОРИЧЕСКИ НЕ ДОПУСТИМЫ):
\u274C "Найди сторону по теореме Пифагора" изолированно \u2192 ЗАМЕНИ на задачу, где теорема Пифагора — лишь один шаг в многоступенчатом решении
\u274C "Вычисли площадь фигуры" по одной формуле \u2192 ЗАМЕНИ на задачу, комбинирующую площади с другими темами (подобие, тригонометрия, окружности)
\u274C "Определи вид четырёхугольника" \u2192 ЗАМЕНИ на "Докажи, что фигура является [X], используя координаты/векторы/свойства"
\u274C Применение одной теоремы без синтеза \u2192 ЗАМЕНИ на задачу, требующую комбинирования планиметрии с текущей темой

САМОПРОВЕРКА — ВЫПОЛНИ ДЛЯ КАЖДОГО ЗАДАНИЯ:
Прочитай задание и спроси себя: "Мог бы ученик 8 класса решить это задание без знания текущей темы?"
Если ДА — задание слишком простое. Переделай его, добавив:
- многошаговое рассуждение с комбинированием нескольких тем
- требование доказать или обосновать результат
- связь с планиметрией предыдущих классов

ОБЯЗАТЕЛЬНЫЕ ЭЛЕМЕНТЫ В КАЖДОМ ЗАДАНИИ (минимум один):
\u2713 СИНТЕЗ: комбинирование текущей темы с планиметрией 7-8 классов (равенство, подобие, площади, Пифагор)
\u2713 ДОКАЗАТЕЛЬСТВО: "докажи", "обоснуй", "покажи что"
\u2713 МНОГОШАГОВОСТЬ: решение в 3+ шага с использованием разных теорем
\u2713 ОЦЕНКА: "верно ли утверждение", "найди ошибку в рассуждении", "сравни два подхода"`,

    exampleTask: `Тема "Теорема косинусов", 9 класс, open_question:
"В треугольнике ABC стороны AB = 5, BC = 8, угол B = 60\u00b0. Найди сторону AC (теорема косинусов). Вычисли площадь треугольника (формула через синус из 9кл). Найди радиус описанной окружности (теорема синусов). Проверь: подставь найденные значения в теорему синусов для всех трёх сторон."
(теорема косинусов + площадь + теорема синусов + проверка)`,

    examContext: `ПРИВЯЗКА К ЭКЗАМЕНУ:
Для 9 класса: задания должны соответствовать уровню ОГЭ (часть 2 — геометрические задачи), а НЕ уровню контрольной работы за 8 класс.
Для 10-11 класса: задания должны соответствовать уровню ЕГЭ профильного (задания № 13, 16), а НЕ уровню базового экзамена.`,
  },
]

export function getGeometryGradeTier(grade: number): GradeTierConfig | null {
  return geometryGradeTiers.find(t => grade >= t.grades[0] && grade <= t.grades[1]) ?? null
}
