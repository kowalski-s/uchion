# Roadmap

## ✅ Completed (MVP)

### Core
- [x] Monorepo структура.
- [x] Shared Layer (`shared/worksheet.ts`).
- [x] API `/api/generate` с Zod-валидацией.
- [x] AI Provider (OpenAI + Dummy).
- [x] PDF Generation (Server + Client).

### Frontend
- [x] SPA Routing (`/`, `/worksheet/:id`).
- [x] Генерация через SSE (Progress Streaming).
- [x] Просмотр и скачивание PDF.

### QA & CI
- [x] Smoke Tests (`npm run smoke`).
- [x] PDF Dump (`scripts/dump-pdf.ts`).
- [x] Vercel Deploy Config.

---

Фаза 1 БД
	Настроить сапабейз✔️
	Установить Drizzle ORM✔️
	Спроектировать схему БД✔️
	Написать миграции✔️
	Провести миграции✔️
	Проверка прав на бэкенде
	Бэкапы БД (автоматические)

  Фаза 2 Авторизация
	Самописный Oauth 2.0✔️
	Добавить вход через тг
	Добавить Яндекс OAuth✔️
	Защитить роуты
	Ревью безопасности
	Логика сессий/токенов (refresh token, истечение)
	Логаут + инвалидация токенов

  Фаза 3 Личный кабинет
	Страница dashboard
	Раздел мои листы
	CRUD операции с листами
	Отображение лимитов генераций (сколько осталось)
	Статус подписки пользователя
	Скачивание PDF/DOCX
	Ревью и тест
	Водяной знак на PDF


  Фаза 4 Монетизация
	Логика лимитов
	Интеграция prodamus 
	Обработка webhook
	Начисление генераций
	Ревью 
	Тестирование 
	Реферальная система (доп. генерации за друга)
	Бонус за подписку на Telegram

  Фаза 5 Админ-панель 
	
		Список пользователей
		Просмотр генераций и ошибок
		Список платежей


    Фаза 6 Допил фишек
	Улучшение генерации: разбить на 3 уровня сложности
	Перегенерация отдельного задания (это в документе как ключевая фича)
	Выбор типов заданий через UI (единственный/множественный выбор, соотнесение и т.д.)
	Компоновка листа (5 заданий → новая страница)
	Внедрить несколько ИИ для генерации 
		- Абстракция провайдера (интерфейс для разных ИИ)
    - Роутинг по типу задания (какая модель для чего)
    - Fallback логика (таймауты, ретраи, переключение)
    - Нормализация ответов (разные модели → единый формат)
	Добавить презентации 
	Кастомизация листов под выбранный стиль
	Ревью и тест


  Фаза 7 Деплой
	Настроить VPS 
	Мигрировать БД
		Написать скрипт экспорта/импорта данных
    Проверить совместимость Drizzle с новой БД
    План миграции без даунтайма (или с минимальным)
	Деплой на прод
	Финальное тестирование 
	Мониторинг и алерты (ошибки, падения)
	Логирование (особенно ошибок генерации)
	SSL сертификаты
	CI/CD пайплайн

  Сквозное
	

Обработка ошибок на фронте (что видит юзер когда всё упало)
	Rate limiting на API