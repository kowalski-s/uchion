import type { GradeTierConfig } from '../../types.js'

export const algebraGradeTiers: GradeTierConfig[] = [
  // Tier 1: 7-8 класс — анализ и связи
  {
    grades: [7, 8],
    cognitiveContract: `ЗАПРЕЩЁННЫЕ ПАТТЕРНЫ (уровень 5-6 класса — слишком просто):
\u274C "Реши уравнение X" без объяснения метода \u2192 ЗАМЕНИ на "Реши уравнение X, объясни выбор метода и проверь ответ подстановкой"
\u274C Одношаговые задания (только вычислить/упростить) \u2192 ЗАМЕНИ на задания с анализом, проверкой или сравнением методов
\u274C "Вычисли значение выражения" без контекста \u2192 ЗАМЕНИ на "Упрости двумя способами и сравни, какой эффективнее"
\u274C "Раскрой скобки" как единственное действие \u2192 ЗАМЕНИ на "Раскрой, приведи подобные, проверь подстановкой числа"

ОБЯЗАТЕЛЬНЫЕ ЭЛЕМЕНТЫ В КАЖДОМ ЗАДАНИИ (минимум один):
\u2713 АНАЛИЗ: "объясни, почему", "что изменится, если", "какое правило применил"
\u2713 СРАВНЕНИЕ МЕТОДОВ: "реши двумя способами", "какой метод удобнее и почему"
\u2713 ВЕРИФИКАЦИЯ: "проверь подстановкой", "найди ошибку в решении", "верно ли утверждение"
\u2713 СВЯЗИ: "как это связано с [тема из прошлого]", "используя свойства степеней из..."`,

    exampleTask: `Тема "Формулы сокращённого умножения", 7 класс, open_question:
"Упрости выражение (a + 3)² - (a - 3)² двумя способами: 1) раскрой скобки по формулам, 2) используй формулу разности квадратов. Сравни способы — какой короче? Проверь результат при a = 2."
(два метода + сравнение + проверка подстановкой)`,
  },

  // Tier 2: 9-11 класс — синтез, оценка, аргументация
  {
    grades: [9, 11],
    cognitiveContract: `ЗАПРЕЩЁННЫЕ ПАТТЕРНЫ (уровень 7-8 класса — КАТЕГОРИЧЕСКИ НЕ ДОПУСТИМЫ):
\u274C "Реши уравнение" / "Упрости выражение" без контекста и аргументации \u2192 ЗАМЕНИ на задание с обоснованием метода, проверкой и анализом
\u274C "Найди корни" без анализа ОДЗ, проверки и интерпретации \u2192 ЗАМЕНИ на "Реши, проверь ОДЗ, объясни, есть ли посторонние корни"
\u274C Изолированное задание на одну тему без связи с ранее изученным \u2192 ЗАМЕНИ на задание, синтезирующее несколько тем (7-11кл)
\u274C "Вычисли" / "Найди значение" как единственное требование \u2192 ЗАМЕНИ на задание с контекстом, аргументацией или доказательством

САМОПРОВЕРКА — ВЫПОЛНИ ДЛЯ КАЖДОГО ЗАДАНИЯ:
Прочитай задание и спроси себя: "Мог бы ученик 7 класса решить это задание?"
Если ДА — задание слишком простое. Переделай его, добавив:
- требование обосновать выбор метода решения
- синтез нескольких тем (прогрессии + системы, тригонометрия + квадратные уравнения)
- анализ особых случаев, проверку ОДЗ, доказательство

ОБЯЗАТЕЛЬНЫЕ ЭЛЕМЕНТЫ В КАЖДОМ ЗАДАНИИ (минимум один):
\u2713 КОНТЕКСТ: задание связано с реальной ситуацией или опирается на несколько тем курса
\u2713 АРГУМЕНТАЦИЯ: "обоснуй выбор метода", "докажи", "объясни, почему нет других решений"
\u2713 СИНТЕЗ: комбинирование текущей темы с материалом предыдущих классов (7-8кл обязательно)
\u2713 ОЦЕНКА: "найди ошибку в рассуждении", "верно ли утверждение", "при каких условиях верно"`,

    exampleTask: `Тема "Прогрессии", 9 класс, open_question:
"Сумма трёх чисел, образующих геометрическую прогрессию, равна 21. Если к ним прибавить 1, 2 и 3, то получится арифметическая прогрессия. Найди эти числа. Обоснуй, почему решение единственно. Какие свойства прогрессий ты использовал?"
(синтез обеих прогрессий + система уравнений + аргументация единственности)`,

    examContext: `ПРИВЯЗКА К ЭКЗАМЕНУ:
Для 9 класса: задания должны соответствовать уровню ОГЭ, а НЕ уровню контрольной работы за 7 класс.
Для 10-11 класса: задания должны соответствовать уровню ЕГЭ профильного уровня, а НЕ уровню школьного теста за средние классы.`,
  },
]

export function getAlgebraGradeTier(grade: number): GradeTierConfig | null {
  return algebraGradeTiers.find(t => grade >= t.grades[0] && grade <= t.grades[1]) ?? null
}
