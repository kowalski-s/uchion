# Development Setup Guide

## Проблема: "Failed to fetch" при регистрации

Если вы видите ошибку "Failed to fetch" при попытке регистрации, это означает, что **backend API сервер не запущен**.

## Решение

Для работы аутентификации нужно запустить **ОБА** сервера:
1. **Frontend** (Vite) - на порту 5173
2. **Backend API** (Vercel dev) - на порту 3000

### Вариант 1: Автоматический запуск (Рекомендуется)

Используйте новую команду `npm run dev`, которая запускает оба сервера одновременно:

```bash
npm run dev
```

Вы увидите логи от обоих серверов с префиксами:
- `[VITE]` - frontend сервер
- `[API]` - backend API сервер

### Вариант 2: Ручной запуск

Запустите два терминала:

**Терминал 1 - Frontend:**
```bash
npm run dev:frontend
```

**Терминал 2 - Backend:**
```bash
npm run dev:backend
```

### Вариант 3: Только Vercel dev (медленнее)

Если вы хотите использовать только Vercel dev server для всего:

```bash
npm run dev:full
```

Это запустит и frontend и backend на порту 3000, но будет медленнее чем Vite.

## Проверка

После запуска проверьте что:
1. Frontend доступен на `http://localhost:5173`
2. Backend API доступен на `http://localhost:3000`

Можно проверить API напрямую:
```bash
curl http://localhost:3000/api/auth/csrf
```

Если получите JSON ответ - всё работает!

## Архитектура

```
┌─────────────────────┐      Proxy /api/*       ┌─────────────────────┐
│  Vite Dev Server    │ ──────────────────────> │  Vercel Dev (API)   │
│  Port: 5173         │                          │  Port: 3000         │
│  (Frontend)         │ <────────────────────── │  (Backend)          │
└─────────────────────┘      API Response       └─────────────────────┘
```

- Все запросы на `/api/*` автоматически проксируются с Vite на Vercel dev
- Настройка прокси находится в `vite.config.ts`

## Troubleshooting

### Ошибка: "Не удалось подключиться к серверу"

**Причина:** Backend сервер не запущен

**Решение:** Убедитесь, что запущен `npm run dev` (оба сервера) или `npm run dev:backend`

### Ошибка: "Port 3000 is already in use"

**Причина:** Другой процесс использует порт 3000

**Решение:** Остановите другой процесс или измените порт:
```bash
# Windows
netstat -ano | findstr :3000
taskkill /PID <PID> /F

# Linux/Mac
lsof -i :3000
kill -9 <PID>
```

### Ошибка: "Port 5173 is already in use"

**Причина:** Другой процесс использует порт 5173

**Решение:** Остановите другой процесс на этом порту
